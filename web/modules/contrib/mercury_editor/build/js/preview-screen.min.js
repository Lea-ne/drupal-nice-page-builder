!function(){"use strict";((e,t,n,a)=>{function i(e){return e.stopPropagation(),e.preventDefault(),!1}function s(e){window.parent.postMessage({type:"ajaxPreviewPageState",settings:t.ajaxPageState}),document.querySelectorAll(".is-me-focused").forEach((e=>{e.classList.remove("is-me-focused")})),e.currentTarget.classList.add("is-me-focused");const n={type:"drupalAjax",settings:{dialogType:e.currentTarget.getAttribute("data-dialog-type"),dialog:JSON.parse(e.currentTarget.getAttribute("data-dialog-options")),dialogRenderer:JSON.parse(e.currentTarget.getAttribute("data-dialog-renderer")),url:e.currentTarget.getAttribute("href")}};return window.parent.postMessage(n),e.stopPropagation(),e.preventDefault(),!1}function o(e){const t=document.querySelector(".gu-mirror");if(!t)return;const n=t.offsetWidth>t.offsetHeight?"offsetHeight":"offsetWidth",a=Math.min(300/t[n],1),i=t.getBoundingClientRect(),s=e.clientX-i.x,r=e.clientY-i.y;t.style.setProperty("transform-origin",`${s}px ${r}px`),t.style.setProperty("transform",`scale(${a})`),window.removeEventListener("mousemove",o)}function r(e){const t=e.target.closest(".lpb-controls, .js-lpb-component");t.classList.add("focused"),t.classList.remove("transitioning"),t.classList.remove("blurred")}function d(e){const t=e.target.closest(".lpb-controls, .js-lpb-component");t.classList.add("transitioning"),setTimeout((()=>{t.classList.contains("transitioning")&&(t.classList.remove("focused"),t.classList.remove("transitioning"),t.classList.add("blurred"))}),250)}n(document).on("lpb-builder:init",(e=>{const t=e.target,a=n(t).data("drake");a&&function(e,t){let a,i;const s=n('<div class="lp-hint hidden"></div>')[0];t.on("cloned",((e,t,n)=>{window.addEventListener("mousemove",o)})),t.on("drag",(t=>{t.parentNode&&t.parentNode.insertBefore(s,t),e.find(".js-lpb-ui").addClass("hidden")})),t.on("shadow",((e,t,n)=>{if(e.classList.contains("lp-hint"))return;s.style={width:"",height:"",marginLeft:"",marginTop:""};const i=e.nextElementSibling||e.previousElementSibling,o=i&&e.getBoundingClientRect().top===i.getBoundingClientRect().top?"vertical":"horizontal";if("horizontal"==o){const t=parseInt(window.getComputedStyle(e.parentNode).getPropertyValue("padding-left"));s.style.marginLeft="-"+t+"px"}if("vertical"==o){const t=parseInt(window.getComputedStyle(e.parentNode).getPropertyValue("padding-top"));s.style.marginTop="-"+t+"px"}"vertical"===o&&(s.style.height=e.parentNode.clientHeight+"px"),"horizontal"===o&&(s.style.width=e.parentNode.clientWidth+"px"),s.setAttribute("data-orientation",o),[...t.childNodes].filter((e=>void 0===e.classList)).forEach((e=>e.remove())),t.replaceChild(s,e),null===s.nextSibling&&null!==s.previousSibling&&s.previousSibling.classList.contains("lpb-btn--add")&&t.insertBefore(s,s.previousSibling);const r=null!==s.nextSibling&&s.nextSibling.classList.contains("lp-ghost"),d=null!==s.previousSibling&&s.previousSibling.classList.contains("lp-ghost");r||d?(s.classList.add("hidden"),a.classList.remove("gu-transit")):(s.classList.remove("hidden"),a.classList.add("gu-transit"))})),t.on("cloned",((e,t)=>{a=t.cloneNode(!0),a.classList.add("lp-ghost"),t.parentNode&&t.parentNode.insertBefore(a,t),i=t,t.remove()})),t.on("dragend",(t=>{s.replaceWith(i),a.remove(),e.find(".js-lpb-ui").removeClass("hidden")}))}(n(t),a)})),e.behaviors.mercuryEditorPreviewScreen={attach:function(e,o){const l=[...document.querySelectorAll("[data-me-edit-screen-key]")].map((e=>e.getAttribute("data-me-edit-screen-key"))).filter(((e,t,n)=>n.indexOf(e)!==t));l.length>0&&console.error('Multiple HTML elements found using the same data attribute, "data-me-edit-screen-key", which should be unique. Make sure attributes are not passed to child elements in twig templates.',l),window.parent.postMessage({type:"ajaxPreviewPageState",settings:t.ajaxPageState}),a("me-msg-broadcaster",".js-lpb-ui.use-ajax, .js-lpb-ui .use-ajax").forEach((e=>{n(e).off(),e.addEventListener("mousedown",i),e.addEventListener("mouseup",i),e.addEventListener("click",s)})),window.parent!==window&&(a("me-stop-iframed-links","a",e).forEach((e=>{null===e.closest(".lpb-controls")?(e.setAttribute("target","_parent"),e.addEventListener("click",(e=>(e.stopPropagation(),e.preventDefault(),!1)))):e.addEventListener("mousedown",(e=>e.target.focus()))})),a("me-prevent-focus","a, button, input, textarea, select, details",e).forEach((e=>{null!==e.closest(".lpb-controls")||null!==e.closest(".mercury-editor-ui")||e.classList.contains("use-postmessage")||e.setAttribute("tabindex","-1")})),a("me-layout-hover",".lpb-layout").forEach((e=>{e.addEventListener("mouseenter",(e=>{e.target.setAttribute("data-mouseover","true"),setTimeout((()=>{e.target.getAttribute("data-mouseover")&&function(e){[...e.querySelectorAll("[data-region]"),e].forEach((e=>{const n=getComputedStyle(e);e.hasAttribute("data-me-padding")||e.setAttribute("data-me-padding",`${n.paddingTop} ${n.paddingRight} ${n.paddingBottom} ${n.paddingLeft}`);let a=t.mercuryEditor.rolloverPaddingBlock??10,i=t.mercuryEditor.rolloverPaddingInline??0;e.style.paddingTop=Math.max(a,parseInt(n.paddingTop))+"px",e.style.paddingRight=Math.max(i,parseInt(n.paddingRight))+"px",e.style.paddingBottom=Math.max(a,parseInt(n.paddingBottom))+"px",e.style.paddingLeft=Math.max(i,parseInt(n.paddingLeft))+"px"}))}(e.target)}),100)})),e.addEventListener("mouseleave",(e=>{e.target.removeAttribute("data-mouseover"),setTimeout((()=>{e.target.getAttribute("data-mouseover")||function(e){[...e.querySelectorAll("[data-region]"),e].forEach((e=>{e.hasAttribute("data-me-padding")&&(getComputedStyle(e),e.style.padding=e.getAttribute("data-me-padding"))}))}(e.target)}),100)}))}))),a("reveal-on-hover",".js-lpb-component").forEach((e=>{e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",d)})),a("reveal-on-hover",".lpb-controls").forEach((e=>{e.addEventListener("mouseenter",r),e.addEventListener("focusin",r),e.addEventListener("mouseleave",d),e.addEventListener("focusout",d)}))}}})(Drupal,drupalSettings,jQuery,once)}();
